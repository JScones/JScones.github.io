"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4655],{4655:(oe,U,a)=>{a.r(U),a.d(U,{LoadCurrentModule:()=>E});var d=a(6895),l=a(433),i=a(4633),I=a(4466),C=a(1862),T=a(655),F=a(4371),J=a(4814),g=a(6645);class v extends F.L{constructor(n,t,r,s,h,c,p,x,Z,f,m){super(n,t,r,s,h,c,p,x),this.routeLength=Z,this.voltageDrop=f,this.voltageDropPercent=m}static fromQuery(n){return function M(o){return!!("routeLength"in o&&"voltageDrop"in o&&"voltageDropPercent"in o&&"solidFlex"in o&&"phase"in o&&"balance"in o&&"cableType"in o&&"coreSize"in o&&"coreMaterial"in o&&"insulation"in o&&"installationCondition"in o&&(0,g.hj)(o.routeLength)&&(0,g.hj)(o.voltageDrop)&&(0,g.hj)(o.voltageDropPercent)&&(0,g.hj)(o.routeLength)&&(0,g.hj)(o.coreSize)&&(0,g.hj)(o.installationCondition)&&["Solid","Flex"].includes(o.solidFlex)&&["Single","Three"].includes(o.phase)&&["Balanced","Unbalanced"].includes(o.balance)&&["SingleCore","Multicore","VSD"].includes(o.cableType)&&J.dY.includes(o.coreMaterial))&&["PVC","XLPE"].includes(o.insulation)}(n)?new v(n.solidFlex,n.phase,n.balance,n.cableType,parseFloat(n.coreSize),n.coreMaterial,n.insulation,parseInt(n.installationCondition),parseFloat(n.routeLength),parseFloat(n.voltageDrop),parseFloat(n.voltageDropPercent)):null}}var e=a(8256),b=a(3793),L=a(2802);function O(o,n){if(1&o&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",2)(3,"ion-card")(4,"ion-card-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col",3)(8,"table")(9,"tr")(10,"td"),e._uU(11,"Supply Voltage:"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()(),e.TgZ(14,"tr")(15,"td"),e._uU(16,"Volt Drop:"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA()(),e.TgZ(19,"tr")(20,"td"),e._uU(21,"Core Size:"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.TgZ(24,"sup"),e._uU(25,"2"),e.qZA()()(),e.TgZ(26,"tr")(27,"td"),e._uU(28,"Cable Type:"),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA()(),e.TgZ(31,"tr")(32,"td"),e._uU(33,"Install Cond:"),e.qZA(),e.TgZ(34,"td"),e._uU(35),e.qZA()()()(),e.TgZ(36,"ion-col")(37,"table")(38,"tr")(39,"td"),e._uU(40,"Length:"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.ALo(43,"number"),e.qZA()(),e.TgZ(44,"tr")(45,"td"),e._uU(46,"Volt Drop:"),e.qZA(),e.TgZ(47,"td"),e._uU(48),e.ALo(49,"number"),e.qZA()(),e.TgZ(50,"tr")(51,"td"),e._uU(52,"Fixed/Flexible Conductor:"),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA()(),e.TgZ(55,"tr")(56,"td"),e._uU(57,"Insulation:"),e.qZA(),e.TgZ(58,"td"),e._uU(59),e.qZA()()()()()()()()()(),e.TgZ(60,"ion-row")(61,"ion-col",2)(62,"h2",2),e._uU(63),e.ALo(64,"number"),e.qZA(),e.TgZ(65,"p",4),e._uU(66," Load current too high, displaying the maximum current-carrying capacity of this core size. "),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(13),e.hij("",t.model.supplyVoltage,"V"),e.xp6(5),e.hij("",t.model.voltageDropPercent,"%"),e.xp6(5),e.hij("",t.model.coreSize,"mm"),e.xp6(7),e.Oqu(t.model.cableType),e.xp6(5),e.Oqu(t.model.installationConditionLabel),e.xp6(7),e.hij("",e.xi3(43,11,t.model.routeLength,".0-3"),"m"),e.xp6(6),e.hij("",e.lcZ(49,14,t.model.voltageDrop),"V"),e.xp6(6),e.Oqu(t.model.solidFlexPretty),e.xp6(5),e.Oqu(t.model.insulation),e.xp6(4),e.hij(" Load Current: ",e.xi3(64,16,t.loadCurrent,".2-2")," A "),e.xp6(2),e.Q6J("hidden",!t.overCurrent)}}let D=(()=>{class o{constructor(t,r,s,h,c){this.route=t,this.navController=r,this.alertController=s,this.database=h,this.cableCalculationService=c,this.loadCurrent=0,this.overCurrent=!1}ngOnInit(){const t=v.fromQuery(this.route.snapshot.queryParams);t?(this.model=t,this.search().then(r=>{this.loadCurrent=r}).catch(console.error)):this.handleNoModel().catch(console.error)}search(){return(0,T.mG)(this,void 0,void 0,function*(){const{phase:t,cableType:r,temperature:s,installationCondition:h,coreSize:c,solidFlex:p,insulation:x,routeLength:Z,voltageDrop:f}=this.model,m=yield this.database.getCCC(t,r,s,h,c,p);if(!m)throw new Error("Could not find CCC");const P=yield this.database.getResistance(p,r,c,s),A=yield this.database.getReactance(p,r,c,x);if(!P||!A)throw new Error("Unable to find resistance or reactance");const X=this.cableCalculationService.calcImpedance(P.Resistance,A.Reactance),G=this.cableCalculationService.calcUnitVoltageDrop(X,t),_=this.cableCalculationService.calcLoadCurrent(f,G,Z);if(_>=m.CCC)return this.overCurrent=!0,m.CCC;const H=this.cableCalculationService.calcConductorTemp(_,m.CCC,s,30),W=this.cableCalculationService.roundTemp(H),S=yield this.database.getResistance(p,r,c,W);if(!S)throw new Error("Unable to find actual resistance");const K=this.cableCalculationService.calcImpedance(S.Resistance,A.Reactance),ee=this.cableCalculationService.calcUnitVoltageDrop(K,t);return this.cableCalculationService.calcLoadCurrent(f,ee,Z)})}handleNoModel(){return(0,T.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Something went wrong",subHeader:"Failed to read form data. Please try again..."});yield t.present(),setTimeout(()=>{t.dismiss(),this.navController.navigateBack("/cable-selection")},3e3)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.gz),e.Y36(i.SH),e.Y36(i.Br),e.Y36(b.k9),e.Y36(b.i9))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-load-current-results"]],decls:4,vars:1,consts:[["defaultHref","load-current"],[4,"ngIf"],[1,"ion-text-center"],["size","12","size-md","6",1,"right-border"],[2,"color","red",3,"hidden"]],template:function(t,r){1&t&&(e.TgZ(0,"app-page-header",0),e._uU(1,"Results"),e.qZA(),e.TgZ(2,"ion-content"),e.YNc(3,O,67,19,"ion-grid",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",r.model))},dependencies:[d.O5,i.PM,i.FN,i.wI,i.W2,i.jY,i.Nd,L.q,d.JJ],styles:["[_nghost-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:80%;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(even){text-align:right}@media screen and (min-width: 768px){[_nghost-%COMP%]   .right-border[_ngcontent-%COMP%]{border-right:1px solid #bbbbbb}}"]}),o})();var q=a(2856),z=a(4004),Q=a(1884),N=a(2463);function j(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",36),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function V(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",36),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Y(o,n){if(1&o&&(e.TgZ(0,"ion-item")(1,"ion-radio",36),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function y(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",36),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.text)}}function R(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1,"Length"),e.qZA())}function w(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1," Voltage drop percentage "),e.qZA())}function B(o,n){if(1&o&&(e.TgZ(0,"div",37)(1,"ion-label"),e._uU(2,"Sorry, you must supply a valid value for:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,R,2,0,"li",38),e.YNc(5,w,2,0,"li",38),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.form.controls.routeLength.valid),e.xp6(1),e.Q6J("ngIf",!t.form.controls.voltageDropPercent.valid)}}let u=class extends N.xJ{constructor(n,t,r){super(n,t,r),this.fb=n,this.databaseService=t,this.navController=r,this.form=this.fb.group({routeLength:[10,l.kI.compose([l.kI.required,l.kI.pattern(/^\d*\.?\d*$/),l.kI.min(1e-6)])],voltageDropPercent:this.fb.control(2.5,l.kI.compose([l.kI.required,l.kI.pattern(/^\d*\.?\d*$/),l.kI.min(1e-6),l.kI.max(100)])),voltageDrop:[10],solidFlex:["Solid"],phase:["Three"],balance:["Balanced"],cableType:["SingleCore"],coreSize:[1],coreMaterial:["Plain copper"],insulation:["PVC"],installationCondition:[1]}),this.searchRoute="/load-current/results",this.disableBalance$=this.form.valueChanges.pipe((0,z.U)(s=>"Single"===s.phase||null),(0,Q.x)())}};u.\u0275fac=function(n){return new(n||u)(e.Y36(l.j3),e.Y36(b.k9),e.Y36(i.SH))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-load-current"]],features:[e.qOj],decls:102,vars:24,consts:[[1,"ion-padding-top","ion-padding-bottom"],[3,"formGroup"],["size","12","size-xl","6"],[1,"list-label"],["lines","none"],["label","Length (m)","type","number","formControlName","routeLength","errorText","A positive route length is required",1,"ion-text-right",3,"clearInput"],["label","Volt Drop (%)","type","number","formControlName","voltageDropPercent","errorText","A valid voltage drop percentage is required",1,"ion-text-right",3,"clearInput"],[1,"ion-text-right","fake-input"],[1,"no-margin"],[1,"list-label","m-t-1","d-block"],["formControlName","phase"],["value","Single"],["value","Three"],[1,"ion-text-right","fake-input","small-width"],["formControlName","balance"],["value","Balanced"],["value","Unbalanced"],["size","12","size-md","6"],[3,"lines"],["interface","popover","label","","justify","start","formControlName","coreSize",1,"full-select"],[3,"value",4,"ngFor","ngForOf"],["label","","justify","start","formControlName","coreMaterial",1,"full-select"],["formControlName","solidFlex"],["value","Flex"],["value","Solid"],["formControlName","cableType"],[4,"ngFor","ngForOf"],["formControlName","insulation"],["value","PVC"],["value","XLPE"],["size","12","size-md","9","size-xl","6"],["interface","action-sheet","label","","justify","start","formControlName","installationCondition",1,"full-select"],["size","12",1,"ion-text-center"],["width","140","height","140",1,"transparent-bg",3,"src"],["class","form-warnings ion-padding",4,"ngIf"],["color","firstflexblue","expand","block",3,"disabled","click"],[3,"value"],[1,"form-warnings","ion-padding"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"app-page-header"),e._uU(1,"Load Current"),e.qZA(),e.TgZ(2,"ion-content",0)(3,"form",1)(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-label",3),e._uU(8,"Details:"),e.qZA(),e.TgZ(9,"ion-item",4),e._UZ(10,"ion-input",5),e.qZA(),e.TgZ(11,"ion-item",4),e._UZ(12,"ion-input",6),e.qZA(),e.TgZ(13,"ion-item")(14,"ion-label"),e._uU(15,"Volt Drop (V)"),e.qZA(),e.TgZ(16,"ion-label",7),e._uU(17),e.ALo(18,"number"),e.qZA()()(),e.TgZ(19,"ion-col",2)(20,"ion-list",8)(21,"ion-label",9),e._uU(22," Select Phase: "),e.qZA(),e.TgZ(23,"ion-radio-group",10)(24,"ion-item")(25,"ion-radio",11),e._uU(26,"Single phase"),e.qZA()(),e.TgZ(27,"ion-item")(28,"ion-radio",12),e._uU(29,"Three Phase"),e.qZA()()()(),e.TgZ(30,"ion-item")(31,"ion-label"),e._uU(32,"Supply Voltage"),e.qZA(),e.TgZ(33,"ion-label",13),e._uU(34),e.qZA()(),e.TgZ(35,"ion-list",8)(36,"ion-label",9),e._uU(37," Balanced/Unbalanced: "),e.qZA(),e.TgZ(38,"ion-radio-group",14)(39,"ion-item")(40,"ion-radio",15),e.ALo(41,"async"),e._uU(42,"Balanced"),e.qZA()(),e.TgZ(43,"ion-item")(44,"ion-radio",16),e.ALo(45,"async"),e._uU(46,"Unbalanced"),e.qZA()()()()(),e.TgZ(47,"ion-col",17)(48,"ion-label",9),e._uU(49," Core Size (mm"),e.TgZ(50,"sup"),e._uU(51,"2"),e.qZA(),e._uU(52,") "),e.qZA(),e.TgZ(53,"ion-item",18)(54,"ion-select",19),e.YNc(55,j,2,2,"ion-select-option",20),e.qZA()()(),e.TgZ(56,"ion-col",17)(57,"ion-label",9),e._uU(58," Core Material"),e.qZA(),e.TgZ(59,"ion-item",18)(60,"ion-select",21),e.YNc(61,V,2,2,"ion-select-option",20),e.qZA()()(),e.TgZ(62,"ion-col",2)(63,"ion-list",8)(64,"ion-label",9),e._uU(65,"Fixed or Flexible Conductor:"),e.qZA(),e.TgZ(66,"ion-radio-group",22)(67,"ion-item")(68,"ion-radio",23),e._uU(69,"Flexible Conductor"),e.qZA()(),e.TgZ(70,"ion-item")(71,"ion-radio",24),e._uU(72,"Fixed Conductor"),e.qZA()()()()(),e.TgZ(73,"ion-col",2)(74,"ion-list",8)(75,"ion-label",9),e._uU(76," Select Cable Type: "),e.qZA(),e.TgZ(77,"ion-radio-group",25),e.YNc(78,Y,3,2,"ion-item",26),e.qZA()()(),e.TgZ(79,"ion-col")(80,"ion-list",8)(81,"ion-label",9),e._uU(82," Insulation "),e.qZA(),e.TgZ(83,"ion-radio-group",27)(84,"ion-item")(85,"ion-radio",28),e._uU(86,"PVC"),e.qZA()(),e.TgZ(87,"ion-item")(88,"ion-radio",29),e._uU(89,"XLPE"),e.qZA()()()()()(),e.TgZ(90,"ion-row")(91,"ion-col",30)(92,"ion-label",9),e._uU(93," Proposed Installation Condition: "),e.qZA(),e.TgZ(94,"ion-item",18)(95,"ion-select",31),e.YNc(96,y,2,2,"ion-select-option",20),e.qZA()()(),e.TgZ(97,"ion-col",32),e._UZ(98,"img",33),e.qZA()()()(),e.YNc(99,B,6,2,"div",34),e.TgZ(100,"ion-button",35),e.NdJ("click",function(){return t.search()}),e._uU(101," Calculate "),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(5),e.hij("",e.xi3(18,17,t.form.value.voltageDrop,".0-2")," V"),e.xp6(17),e.hij("",t.supplyVoltage," V"),e.xp6(6),e.uIk("disabled",e.lcZ(41,20,t.disableBalance$)),e.xp6(4),e.uIk("disabled",e.lcZ(45,22,t.disableBalance$)),e.xp6(9),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreSizeData),e.xp6(4),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreMaterialData),e.xp6(17),e.Q6J("ngForOf",t.cableTypeData),e.xp6(16),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.installConditionData),e.xp6(2),e.Q6J("src",t.installPic,e.LSH),e.xp6(1),e.Q6J("ngIf",!t.form.valid),e.xp6(1),e.Q6J("disabled",!t.form.valid))},dependencies:[d.sg,d.O5,l._Y,l.JJ,l.JL,i.YG,i.wI,i.W2,i.jY,i.pK,i.Ie,i.Q$,i.q_,i.B7,i.se,i.Nd,i.t9,i.n0,i.as,i.U5,i.QI,l.sg,l.u,L.q,d.Ov,d.JJ],styles:["[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%]{color:var(--ion-color-danger)}[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}"]}),u=(0,T.gn)([(0,q.c)()],u);const $=[{path:"",component:u},{path:"results",component:D}];let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.Bz.forChild($),C.Bz]}),o})(),E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,l.u5,i.Pc,k,l.UX,I.m]}),o})()}}]);