"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2565],{2565:(H,x,l)=>{l.r(x),l.d(x,{RouteLengthModule:()=>$});var c=l(6895),a=l(433),i=l(4633),L=l(4466),f=l(1862),T=l(655),R=l(4371),S=l(4814),g=l(6645);class C extends R.L{constructor(n,t,r,s,p,d,h,b,m,A,Z){super(n,t,r,s,p,d,h,b),this.loadCurrent=m,this.voltageDrop=A,this.voltageDropPercent=Z}static fromQuery(n){return function F(o){return!!("loadCurrent"in o&&"voltageDrop"in o&&"voltageDropPercent"in o&&"solidFlex"in o&&"phase"in o&&"balance"in o&&"cableType"in o&&"coreSize"in o&&"coreMaterial"in o&&"insulation"in o&&"installationCondition"in o&&(0,g.hj)(o.loadCurrent)&&(0,g.hj)(o.voltageDrop)&&(0,g.hj)(o.voltageDropPercent)&&(0,g.hj)(o.coreSize)&&(0,g.hj)(o.installationCondition)&&["Solid","Flex"].includes(o.solidFlex)&&["Single","Three"].includes(o.phase)&&["Balanced","Unbalanced"].includes(o.balance)&&["SingleCore","Multicore","VSD"].includes(o.cableType)&&S.dY.includes(o.coreMaterial))&&["PVC","XLPE"].includes(o.insulation)}(n)?new C(n.solidFlex,n.phase,n.balance,n.cableType,parseFloat(n.coreSize),n.coreMaterial,n.insulation,parseInt(n.installationCondition),parseFloat(n.loadCurrent),parseFloat(n.voltageDrop),parseFloat(n.voltageDropPercent)):null}}var e=l(8256),v=l(3793),U=l(2802);function I(o,n){if(1&o&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",2)(3,"ion-card")(4,"ion-card-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col",3)(8,"table")(9,"tr")(10,"td"),e._uU(11,"Supply Voltage:"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()(),e.TgZ(14,"tr")(15,"td"),e._uU(16,"Voltage Drop:"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA()(),e.TgZ(20,"tr")(21,"td"),e._uU(22,"Fixed/Flexible Conductor:"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()(),e.TgZ(25,"tr")(26,"td"),e._uU(27,"Insulation:"),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA()(),e.TgZ(30,"tr")(31,"td"),e._uU(32,"Load Current:"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.ALo(35,"number"),e.qZA()()()(),e.TgZ(36,"ion-col")(37,"table")(38,"tr")(39,"td"),e._uU(40,"Volt Drop:"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA()(),e.TgZ(43,"tr")(44,"td"),e._uU(45,"Core Size:"),e.qZA(),e.TgZ(46,"td"),e._uU(47),e.TgZ(48,"sup"),e._uU(49,"2"),e.qZA()()(),e.TgZ(50,"tr")(51,"td"),e._uU(52,"Cable Type:"),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA()(),e.TgZ(55,"tr")(56,"td"),e._uU(57,"Install Cond:"),e.qZA(),e.TgZ(58,"td"),e._uU(59),e.qZA()()()()()()()()()(),e.TgZ(60,"ion-row")(61,"ion-col",2)(62,"h2",2),e._uU(63),e.ALo(64,"number"),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(13),e.hij("",t.model.supplyVoltage,"V"),e.xp6(5),e.hij("",e.lcZ(19,10,t.model.voltageDrop),"v"),e.xp6(6),e.Oqu(t.model.solidFlexPretty),e.xp6(5),e.Oqu(t.model.insulation),e.xp6(5),e.hij("",e.xi3(35,12,t.model.loadCurrent,".0-3"),"A"),e.xp6(8),e.hij("",t.model.voltageDropPercent,"%"),e.xp6(5),e.hij("",t.model.coreSize,"mm"),e.xp6(7),e.Oqu(t.model.cableType),e.xp6(5),e.Oqu(t.model.installationConditionLabel),e.xp6(4),e.hij(" Length: ",e.xi3(64,15,t.routeLength,".2-2"),"m ")}}let M=(()=>{class o{constructor(t,r,s,p,d){this.route=t,this.navController=r,this.alertController=s,this.database=p,this.cableCalculationService=d,this.routeLength=0}ngOnInit(){const t=C.fromQuery(this.route.snapshot.queryParams);t?(this.model=t,this.search().then(r=>{this.routeLength=r}).catch(console.error)):this.handleNoModel().catch(console.error)}search(){return(0,T.mG)(this,void 0,void 0,function*(){const{phase:t,cableType:r,temperature:s,installationCondition:p,coreSize:d,solidFlex:h,insulation:b,loadCurrent:m,voltageDrop:A}=this.model,Z=yield this.database.getCCC(t,r,s,p,d,h);if(!Z)throw new Error("Could not find CCC");const k=this.cableCalculationService.calcConductorTemp(m,Z.CCC,s,30),G=this.cableCalculationService.roundTemp(k),P=yield this.database.getResistance(h,r,d,G),_=yield this.database.getReactance(h,r,d,b);if(!P||!_)throw new Error("Unable to find resistance or reactance");const X=this.cableCalculationService.calcImpedance(P.Resistance,_.Reactance),E=this.cableCalculationService.calcUnitVoltageDrop(X,this.model.phaseType);return this.cableCalculationService.calcRouteLength(A,E,m)})}handleNoModel(){return(0,T.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Something went wrong",subHeader:"Failed to read form data. Please try again..."});yield t.present(),setTimeout(()=>{t.dismiss(),this.navController.navigateBack("/cable-selection")},3e3)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(i.SH),e.Y36(i.Br),e.Y36(v.k9),e.Y36(v.i9))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-route-length-results"]],decls:4,vars:1,consts:[["defaultHref","route-length"],[4,"ngIf"],[1,"ion-text-center"],["size","12","size-md","6",1,"right-border"]],template:function(t,r){1&t&&(e.TgZ(0,"app-page-header",0),e._uU(1,"Results"),e.qZA(),e.TgZ(2,"ion-content"),e.YNc(3,I,65,18,"ion-grid",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",r.model))},dependencies:[c.O5,i.PM,i.FN,i.wI,i.W2,i.jY,i.Nd,U.q,c.JJ],styles:["[_nghost-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:80%;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(even){text-align:right}@media screen and (min-width: 768px){[_nghost-%COMP%]   .right-border[_ngcontent-%COMP%]{border-right:1px solid #bbbbbb}}"]}),o})();var O=l(2856),J=l(4004),q=l(1884),D=l(2463);function z(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function N(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Q(o,n){if(1&o&&(e.TgZ(0,"ion-item")(1,"ion-radio",37),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function j(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.text)}}function Y(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1,"Load current"),e.qZA())}function V(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1," Voltage drop percentage "),e.qZA())}function y(o,n){if(1&o&&(e.TgZ(0,"div",38)(1,"ion-label"),e._uU(2,"Sorry you must supply a valid value for:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Y,2,0,"li",39),e.YNc(5,V,2,0,"li",39),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.form.controls.loadCurrent.valid),e.xp6(1),e.Q6J("ngIf",!t.form.controls.voltageDropPercent.valid)}}let u=class extends D.xJ{constructor(n,t,r){super(n,t,r),this.fb=n,this.databaseService=t,this.navController=r,this.form=this.fb.group({loadCurrent:[10,a.kI.compose([a.kI.required,a.kI.pattern(/^\d*\.?\d*$/),a.kI.min(1e-6)])],voltageDropPercent:this.fb.control(2.5,a.kI.compose([a.kI.required,a.kI.pattern(/^\d*\.?\d*$/),a.kI.min(1e-6),a.kI.max(100)])),voltageDrop:[10],solidFlex:["Solid"],phase:["Three"],balance:["Balanced"],cableType:["SingleCore"],coreSize:[1],coreMaterial:["Plain copper"],insulation:["PVC"],installationCondition:[1]}),this.searchRoute="/route-length/results",this.disableBalance$=this.form.valueChanges.pipe((0,J.U)(s=>"Single"===s.phase||null),(0,q.x)())}};u.\u0275fac=function(n){return new(n||u)(e.Y36(a.j3),e.Y36(v.k9),e.Y36(i.SH))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-route-length"]],features:[e.qOj],decls:103,vars:24,consts:[[1,"ion-padding-top","ion-padding-bottom"],[3,"formGroup"],["size","12","size-xl","6"],[1,"list-label"],["lines","none",1,"hmm"],["type","number","formControlName","loadCurrent","label","Load Current (A)","errorText","A positive load current is required",1,"ion-text-right",3,"clearInput"],["lines","none"],["label","Volt Drop (%)","type","number","formControlName","voltageDropPercent","errorText","A valid voltage drop percentage is required",1,"ion-text-right",3,"clearInput"],[1,"fake-input"],[1,"ion-text-right"],[1,"noMargin"],["formControlName","phase"],["value","Single"],["value","Three"],[1,"ion-text-right","small-width"],["size","12","size-md","6"],["formControlName","balance"],["value","Balanced"],["value","Unbalanced"],[3,"lines"],["interface","action-sheet","label","","justify","start","formControlName","coreSize",1,"full-select"],[3,"value",4,"ngFor","ngForOf"],["interface","popover","label","","justify","start","formControlName","coreMaterial",1,"full-select"],["formControlName","solidFlex"],["value","Flex"],["value","Solid"],["formControlName","cableType"],[4,"ngFor","ngForOf"],["formControlName","insulation"],["value","PVC"],["value","XLPE"],["size","12","size-md","9","size-xl","6"],["interface","action-sheet","label","","justify","start","formControlName","installationCondition",1,"full-select"],["size","12",1,"ion-text-center"],["width","140","height","140",1,"transparentBG",3,"src"],["class","form-warnings ion-padding",4,"ngIf"],["color","firstflexblue","expand","block",3,"disabled","click"],[3,"value"],[1,"form-warnings","ion-padding"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"app-page-header"),e._uU(1,"Route Length"),e.qZA(),e.TgZ(2,"ion-content",0)(3,"form",1)(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-label",3),e._uU(8,"Details:"),e.qZA(),e.TgZ(9,"ion-item",4),e._UZ(10,"ion-input",5),e.qZA(),e.TgZ(11,"ion-item",6),e._UZ(12,"ion-input",7),e.qZA(),e.TgZ(13,"ion-item",8)(14,"ion-label"),e._uU(15,"Volt Drop (V)"),e.qZA(),e.TgZ(16,"ion-label",9),e._uU(17),e.ALo(18,"number"),e.qZA()()(),e.TgZ(19,"ion-col",2)(20,"ion-list",10)(21,"ion-label",3),e._uU(22," Select Phase: "),e.qZA(),e.TgZ(23,"ion-radio-group",11)(24,"ion-item")(25,"ion-radio",12),e._uU(26,"Single phase"),e.qZA()(),e.TgZ(27,"ion-item")(28,"ion-radio",13),e._uU(29,"Three Phase"),e.qZA()()()(),e.TgZ(30,"ion-item",8)(31,"ion-label"),e._uU(32,"Supply Voltage"),e.qZA(),e.TgZ(33,"ion-label",14),e._uU(34),e.qZA()()(),e.TgZ(35,"ion-col",15)(36,"ion-list",10)(37,"ion-label",3),e._uU(38," Balanced/Unbalanced: "),e.qZA(),e.TgZ(39,"ion-radio-group",16)(40,"ion-item")(41,"ion-radio",17),e.ALo(42,"async"),e._uU(43,"Balanced"),e.qZA()(),e.TgZ(44,"ion-item")(45,"ion-radio",18),e.ALo(46,"async"),e._uU(47,"Unbalanced"),e.qZA()()()()(),e.TgZ(48,"ion-col",15)(49,"ion-label",3),e._uU(50," Core Size (mm"),e.TgZ(51,"sup"),e._uU(52,"2"),e.qZA(),e._uU(53,") "),e.qZA(),e.TgZ(54,"ion-item",19)(55,"ion-select",20),e.YNc(56,z,2,2,"ion-select-option",21),e.qZA()()(),e.TgZ(57,"ion-col",15)(58,"ion-label",3),e._uU(59," Core Material"),e.qZA(),e.TgZ(60,"ion-item",19)(61,"ion-select",22),e.YNc(62,N,2,2,"ion-select-option",21),e.qZA()()(),e.TgZ(63,"ion-col",2)(64,"ion-list",10)(65,"ion-label",3),e._uU(66,"Fixed or Flexible Conductor:"),e.qZA(),e.TgZ(67,"ion-radio-group",23)(68,"ion-item")(69,"ion-radio",24),e._uU(70,"Flexible Conductor"),e.qZA()(),e.TgZ(71,"ion-item")(72,"ion-radio",25),e._uU(73,"Fixed Conductor"),e.qZA()()()()(),e.TgZ(74,"ion-col",2)(75,"ion-list",10)(76,"ion-label",3),e._uU(77," Select Cable Type: "),e.qZA(),e.TgZ(78,"ion-radio-group",26),e.YNc(79,Q,3,2,"ion-item",27),e.qZA()()(),e.TgZ(80,"ion-col")(81,"ion-list",10)(82,"ion-label",3),e._uU(83," Insulation "),e.qZA(),e.TgZ(84,"ion-radio-group",28)(85,"ion-item")(86,"ion-radio",29),e._uU(87,"PVC"),e.qZA()(),e.TgZ(88,"ion-item")(89,"ion-radio",30),e._uU(90,"XLPE"),e.qZA()()()()()(),e.TgZ(91,"ion-row")(92,"ion-col",31)(93,"ion-label",3),e._uU(94," Proposed Installation Condition: "),e.qZA(),e.TgZ(95,"ion-item",19)(96,"ion-select",32),e.YNc(97,j,2,2,"ion-select-option",21),e.qZA()()(),e.TgZ(98,"ion-col",33),e._UZ(99,"img",34),e.qZA()()()(),e.YNc(100,y,6,2,"div",35),e.TgZ(101,"ion-button",36),e.NdJ("click",function(){return t.search()}),e._uU(102," Calculate "),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(5),e.hij("",e.xi3(18,17,t.form.value.voltageDrop,".0-2")," V"),e.xp6(17),e.hij("",t.supplyVoltage," V"),e.xp6(7),e.uIk("disabled",e.lcZ(42,20,t.disableBalance$)),e.xp6(4),e.uIk("disabled",e.lcZ(46,22,t.disableBalance$)),e.xp6(9),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreSizeData),e.xp6(4),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreMaterialData),e.xp6(17),e.Q6J("ngForOf",t.cableTypeData),e.xp6(16),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.installConditionData),e.xp6(2),e.Q6J("src",t.installPic,e.LSH),e.xp6(1),e.Q6J("ngIf",!t.form.valid),e.xp6(1),e.Q6J("disabled",!t.form.valid))},dependencies:[c.sg,c.O5,i.YG,i.wI,i.W2,i.jY,i.pK,i.Ie,i.Q$,i.q_,i.B7,i.se,i.Nd,i.t9,i.n0,i.as,i.U5,i.QI,a._Y,a.JJ,a.JL,a.sg,a.u,U.q,c.Ov,c.JJ],styles:["[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%]{color:var(--ion-color-danger)}[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}"]}),u=(0,T.gn)([(0,O.c)()],u);const B=[{path:"",component:u},{path:"results",component:M}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(B),f.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,w,i.Pc,a.u5,a.UX,L.m]}),o})()}}]);