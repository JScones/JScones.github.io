"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6666],{6666:(H,x,l)=>{l.r(x),l.d(x,{VoltageDropModule:()=>$});var u=l(6895),a=l(433),i=l(4633),_=l(4466),h=l(1862),f=l(655),D=l(4371),S=l(4814),m=l(6645);class Z extends D.L{constructor(n,t,r,s,g,d,p,C,b,v){super(n,t,r,s,g,d,p,C),this.loadCurrent=b,this.routeLength=v}static fromQuery(n){return function F(o){return!!("loadCurrent"in o&&"routeLength"in o&&"solidFlex"in o&&"phase"in o&&"balance"in o&&"cableType"in o&&"coreSize"in o&&"coreMaterial"in o&&"insulation"in o&&"installationCondition"in o&&(0,m.hj)(o.loadCurrent)&&(0,m.hj)(o.routeLength)&&(0,m.hj)(o.coreSize)&&(0,m.hj)(o.installationCondition)&&["Solid","Flex"].includes(o.solidFlex)&&["Single","Three"].includes(o.phase)&&["Balanced","Unbalanced"].includes(o.balance)&&["SingleCore","Multicore","VSD"].includes(o.cableType)&&S.dY.includes(o.coreMaterial))&&["PVC","XLPE"].includes(o.insulation)}(n)?new Z(n.solidFlex,n.phase,n.balance,n.cableType,parseFloat(n.coreSize),n.coreMaterial,n.insulation,parseInt(n.installationCondition),parseFloat(n.loadCurrent),parseFloat(n.routeLength)):null}}var e=l(8256),T=l(3793),A=l(2802);function I(o,n){if(1&o&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",2)(3,"ion-card")(4,"ion-card-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col",3)(8,"table")(9,"tr")(10,"td"),e._uU(11,"Supply Voltage:"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()(),e.TgZ(14,"tr")(15,"td"),e._uU(16,"Length:"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA()(),e.TgZ(20,"tr")(21,"td"),e._uU(22,"Fixed/Flexible Conductor:"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()(),e.TgZ(25,"tr")(26,"td"),e._uU(27,"Insulation:"),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA()()()(),e.TgZ(30,"ion-col")(31,"table")(32,"tr")(33,"td"),e._uU(34,"Load Current:"),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"number"),e.qZA()(),e.TgZ(38,"tr")(39,"td"),e._uU(40,"Core Size:"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.TgZ(43,"sup"),e._uU(44,"2"),e.qZA()()(),e.TgZ(45,"tr")(46,"td"),e._uU(47,"Cable Type:"),e.qZA(),e.TgZ(48,"td"),e._uU(49),e.qZA()(),e.TgZ(50,"tr")(51,"td"),e._uU(52,"Install Cond:"),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA()()()()()()()()()(),e.TgZ(55,"ion-row")(56,"ion-col",2)(57,"h2",2),e._uU(58),e.ALo(59,"number"),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(13),e.hij("",t.model.supplyVoltage,"V"),e.xp6(5),e.hij("",e.xi3(19,9,t.model.routeLength,".0-3"),"m"),e.xp6(6),e.Oqu(t.model.solidFlexPretty),e.xp6(5),e.Oqu(t.model.insulation),e.xp6(7),e.hij("",e.xi3(37,12,t.model.loadCurrent,".0-3"),"A"),e.xp6(6),e.hij("",t.model.coreSize,"mm"),e.xp6(7),e.Oqu(t.model.cableType),e.xp6(5),e.Oqu(t.model.installationConditionLabel),e.xp6(4),e.hij(" Voltage Drop: ",e.xi3(59,15,t.actualVoltageDrop,".2-2")," V ")}}let O=(()=>{class o{constructor(t,r,s,g,d){this.route=t,this.navController=r,this.alertController=s,this.database=g,this.cableCalculationService=d,this.actualVoltageDrop=0}ngOnInit(){const t=Z.fromQuery(this.route.snapshot.queryParams);t?(this.model=t,this.search().then(r=>{this.actualVoltageDrop=r}).catch(console.error)):this.handleNoModel().catch(console.error)}search(){return(0,f.mG)(this,void 0,void 0,function*(){const{phase:t,cableType:r,temperature:s,installationCondition:g,coreSize:d,solidFlex:p,insulation:C,loadCurrent:b,routeLength:v}=this.model,U=yield this.database.getCCC(t,r,s,g,d,p);if(!U)throw new Error("Could not find CCC");const k=this.cableCalculationService.calcConductorTemp(this.model.loadCurrent,U.CCC,s,30),X=this.cableCalculationService.roundTemp(k),P=yield this.database.getResistance(p,r,d,X),V=yield this.database.getReactance(p,r,d,C);if(!P||!V)throw new Error("Unable to find resistance or reactance");const E=this.cableCalculationService.calcImpedance(P.Resistance,V.Reactance),G=this.cableCalculationService.calcUnitVoltageDrop(E,this.model.phaseType);return this.cableCalculationService.calcActualVoltageDrop(G,b,v)})}handleNoModel(){return(0,f.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Something went wrong",subHeader:"Failed to read form data. Please try again..."});yield t.present(),setTimeout(()=>{t.dismiss(),this.navController.navigateBack("/cable-selection")},3e3)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(i.SH),e.Y36(i.Br),e.Y36(T.k9),e.Y36(T.i9))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-voltage-drop-results"]],decls:4,vars:1,consts:[["defaultHref","voltage-drop"],[4,"ngIf"],[1,"ion-text-center"],["size","12","size-md","6",1,"right-border"]],template:function(t,r){1&t&&(e.TgZ(0,"app-page-header",0),e._uU(1,"Results"),e.qZA(),e.TgZ(2,"ion-content"),e.YNc(3,I,60,18,"ion-grid",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",r.model))},dependencies:[u.O5,i.PM,i.FN,i.wI,i.W2,i.jY,i.Nd,A.q,u.JJ],styles:["[_nghost-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:80%;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:8px}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:nth-child(even){text-align:right}@media screen and (min-width: 768px){[_nghost-%COMP%]   .right-border[_ngcontent-%COMP%]{border-right:1px solid #bbbbbb}}"]}),o})();var M=l(2856),J=l(4004),q=l(1884),z=l(2463);function L(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function N(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Q(o,n){if(1&o&&(e.TgZ(0,"ion-item")(1,"ion-radio",34),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Y(o,n){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.text)}}function j(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1,"Load current"),e.qZA())}function y(o,n){1&o&&(e.TgZ(0,"li"),e._uU(1,"Route length"),e.qZA())}function B(o,n){if(1&o&&(e.TgZ(0,"div",35)(1,"ion-label"),e._uU(2,"Sorry you must supply a valid value for:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,j,2,0,"li",36),e.YNc(5,y,2,0,"li",36),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.form.controls.loadCurrent.valid),e.xp6(1),e.Q6J("ngIf",!t.form.controls.routeLength.valid)}}let c=class extends z.xJ{constructor(n,t,r){super(n,t,r),this.fb=n,this.databaseService=t,this.navController=r,this.form=this.fb.group({loadCurrent:[10,a.kI.compose([a.kI.required,a.kI.pattern(/^\d*\.?\d*$/),a.kI.min(1e-6)])],routeLength:[10,a.kI.compose([a.kI.required,a.kI.pattern(/^\d*\.?\d*$/),a.kI.min(1e-6)])],solidFlex:["Solid"],phase:["Three"],balance:["Balanced"],cableType:["SingleCore"],coreSize:[1],coreMaterial:["Plain copper"],insulation:["PVC"],installationCondition:[1]}),this.searchRoute="/voltage-drop/results",this.disableBalance$=this.form.valueChanges.pipe((0,J.U)(s=>"Single"===s.phase||null),(0,q.x)())}};c.\u0275fac=function(n){return new(n||c)(e.Y36(a.j3),e.Y36(T.k9),e.Y36(i.SH))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-voltage-drop"]],features:[e.qOj],decls:96,vars:20,consts:[[1,"ion-padding-top","ion-padding-bottom"],[3,"formGroup"],["size","12","size-md","6"],[1,"list-label"],["lines","none"],["type","number","formControlName","loadCurrent","label","Load Current (A)","errorText","A positive load current is required",1,"ion-text-right",3,"clearInput"],["label","Length (m)","type","number","formControlName","routeLength","errorText","A positive route length is required",1,"ion-text-right",3,"clearInput"],[1,"no-margin"],["formControlName","balance"],["value","Balanced"],["value","Unbalanced"],["formControlName","phase"],["value","Single"],["value","Three"],["color","firstflexblue"],[1,"ion-text-right","fake-input","small-width"],[3,"lines"],["interface","popover","label","","justify","start","formControlName","coreSize",1,"full-select"],[3,"value",4,"ngFor","ngForOf"],["label","","justify","start","formControlName","coreMaterial",1,"full-select"],["formControlName","solidFlex"],["value","Flex"],["value","Solid"],["formControlName","cableType"],[4,"ngFor","ngForOf"],["formControlName","insulation"],["value","PVC"],["value","XLPE"],["size","12","size-md","9","size-xl","6"],["interface","action-sheet","label","","justify","start","formControlName","installationCondition",1,"full-select"],["size","12","size-md","3","size-xl","3",1,"ion-text-center"],["width","140","height","140",1,"transparent-bg",3,"src"],["class","form-warnings ion-padding",4,"ngIf"],["color","firstflexblue","expand","block",3,"disabled","click"],[3,"value"],[1,"form-warnings","ion-padding"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"app-page-header"),e._uU(1,"Voltage Drop"),e.qZA(),e.TgZ(2,"ion-content",0)(3,"form",1)(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-label",3),e._uU(8,"Details:"),e.qZA(),e.TgZ(9,"ion-item",4),e._UZ(10,"ion-input",5),e.qZA(),e.TgZ(11,"ion-item",4),e._UZ(12,"ion-input",6),e.qZA(),e.TgZ(13,"ion-list",7)(14,"ion-label",3),e._uU(15," Balanced/Unbalanced: "),e.qZA(),e.TgZ(16,"ion-radio-group",8)(17,"ion-item")(18,"ion-radio",9),e.ALo(19,"async"),e._uU(20,"Balanced"),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-radio",10),e.ALo(23,"async"),e._uU(24,"Unbalanced"),e.qZA()()()()(),e.TgZ(25,"ion-col",2)(26,"ion-list",7)(27,"ion-label",3),e._uU(28," Select Phase: "),e.qZA(),e.TgZ(29,"ion-radio-group",11)(30,"ion-item")(31,"ion-radio",12),e._uU(32,"Single phase"),e.qZA()(),e.TgZ(33,"ion-item")(34,"ion-radio",13),e._uU(35,"Three Phase"),e.qZA()()()(),e.TgZ(36,"ion-item")(37,"ion-label",14),e._uU(38,"Supply Voltage"),e.qZA(),e.TgZ(39,"ion-label",15),e._uU(40),e.qZA()()(),e.TgZ(41,"ion-col",2)(42,"ion-label",3),e._uU(43," Core Size (mm"),e.TgZ(44,"sup"),e._uU(45,"2"),e.qZA(),e._uU(46,") "),e.qZA(),e.TgZ(47,"ion-item",16)(48,"ion-select",17),e.YNc(49,L,2,2,"ion-select-option",18),e.qZA()()(),e.TgZ(50,"ion-col",2)(51,"ion-label",3),e._uU(52," Core Material"),e.qZA(),e.TgZ(53,"ion-item",16)(54,"ion-select",19),e.YNc(55,N,2,2,"ion-select-option",18),e.qZA()()(),e.TgZ(56,"ion-col",2)(57,"ion-list",7)(58,"ion-label",3),e._uU(59,"Fixed or Flexible Conductor:"),e.qZA(),e.TgZ(60,"ion-radio-group",20)(61,"ion-item")(62,"ion-radio",21),e._uU(63,"Flexible Conductor"),e.qZA()(),e.TgZ(64,"ion-item")(65,"ion-radio",22),e._uU(66,"Fixed Conductor"),e.qZA()()()()(),e.TgZ(67,"ion-col",2)(68,"ion-list",7)(69,"ion-label",3),e._uU(70," Select Cable Type: "),e.qZA(),e.TgZ(71,"ion-radio-group",23),e.YNc(72,Q,3,2,"ion-item",24),e.qZA()()(),e.TgZ(73,"ion-col",2)(74,"ion-list",7)(75,"ion-label",3),e._uU(76," Insulation "),e.qZA(),e.TgZ(77,"ion-radio-group",25)(78,"ion-item")(79,"ion-radio",26),e._uU(80,"PVC"),e.qZA()(),e.TgZ(81,"ion-item")(82,"ion-radio",27),e._uU(83,"XLPE"),e.qZA()()()()()(),e.TgZ(84,"ion-row")(85,"ion-col",28)(86,"ion-label",3),e._uU(87," Proposed Installation Condition: "),e.qZA(),e.TgZ(88,"ion-item",16)(89,"ion-select",29),e.YNc(90,Y,2,2,"ion-select-option",18),e.qZA()()(),e.TgZ(91,"ion-col",30),e._UZ(92,"img",31),e.qZA()()()(),e.YNc(93,B,6,2,"div",32),e.TgZ(94,"ion-button",33),e.NdJ("click",function(){return t.search()}),e._uU(95," Calculate "),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(6),e.uIk("disabled",e.lcZ(19,16,t.disableBalance$)),e.xp6(4),e.uIk("disabled",e.lcZ(23,18,t.disableBalance$)),e.xp6(18),e.hij("",t.supplyVoltage," V"),e.xp6(7),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreSizeData),e.xp6(4),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.coreMaterialData),e.xp6(17),e.Q6J("ngForOf",t.cableTypeData),e.xp6(16),e.Q6J("lines",!1),e.xp6(2),e.Q6J("ngForOf",t.installConditionData),e.xp6(2),e.Q6J("src",t.installPic,e.LSH),e.xp6(1),e.Q6J("ngIf",!t.form.valid),e.xp6(1),e.Q6J("disabled",!t.form.valid))},dependencies:[u.sg,u.O5,i.YG,i.wI,i.W2,i.jY,i.pK,i.Ie,i.Q$,i.q_,i.B7,i.se,i.Nd,i.t9,i.n0,i.as,i.U5,i.QI,a._Y,a.JJ,a.JL,a.sg,a.u,A.q,u.Ov],styles:["[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%]{color:var(--ion-color-danger)}[_nghost-%COMP%]   .form-warnings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}"]}),c=(0,f.gn)([(0,M.c)()],c);const R=[{path:"",component:c},{path:"results",component:O}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(R),h.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,w,i.Pc,a.UX,_.m]}),o})()}}]);